<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Capstone App</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; display: grid; place-items: center; min-height: 100vh; background: #0f172a; color: #e2e8f0; }
    .card { text-align: center; padding: 2rem 3rem; border-radius: 12px; background: #111827; box-shadow: 0 10px 30px rgba(0,0,0,0.35); }
    h1 { margin: 0 0 0.25rem; font-size: 2rem; }
    p { margin: 0.25rem 0 0; color: #94a3b8; }
    .badge { display: inline-block; margin-top: 1rem; padding: 0.35rem 0.6rem; border-radius: 999px; background: #1f2937; color: #93c5fd; font-size: 0.8rem; }
    .calc { margin-top: 1.5rem; background: #0b1220; padding: 1rem; border-radius: 14px; display: inline-block; text-align: left; box-shadow: 0 8px 24px rgba(0,0,0,0.35); }
    .display { width: 100%; box-sizing: border-box; padding: 0.8rem 1rem; margin-bottom: 0.75rem; border-radius: 10px; background: #0a0f1a; color: #e2e8f0; border: 1px solid #1f2a44; font-size: 1.2rem; outline: none; }
    .row { display: grid; grid-template-columns: repeat(4, 3.2rem); gap: 0.55rem; }
    .btn { background: #1f2937; color: #e5e7eb; border: none; padding: 0.75rem; border-radius: 10px; cursor: pointer; font-weight: 600; transition: transform .06s ease, filter .15s ease; }
    .btn:active { transform: translateY(1px); filter: brightness(1.1); }
    .btn.op { background: #0ea5e9; color: #082f49; }
    .btn.equal { background: #22c55e; color: #052e16; grid-column: span 2; }
    .btn.clear { background: #ef4444; color: #fff; }
    .footer { margin-top: 0.75rem; font-size: 0.8rem; color: #93a3b8; text-align: center; }
    .about { margin-top: 1.5rem; text-align: left; max-width: 720px; margin-inline: auto; }
    .about h2 { margin: 0 0 .5rem; font-size: 1.25rem; }
    .about p { margin: .25rem 0 .75rem; color: #a8b3c6; }
    .badges { display: flex; flex-wrap: wrap; gap: .5rem; }
    .badge-chip { background: #0b1220; color: #cbd5e1; border: 1px solid #1f2a44; padding: .35rem .6rem; border-radius: 999px; font-size: .85rem; }
    .wrap { display: grid; grid-template-columns: auto 12rem; gap: 1rem; align-items: start; }
    .history { background: #0b1220; border: 1px solid #1f2a44; border-radius: 12px; padding: 0.75rem; min-height: 12rem; max-height: 16rem; overflow: auto; }
    .history h3 { margin: 0 0 .5rem; font-size: .9rem; color: #7dd3fc; }
    .hist-item { font-size: .9rem; color: #cbd5e1; padding: .3rem .4rem; border-radius: 8px; cursor: pointer; display: flex; justify-content: space-between; gap: .5rem; }
    .hist-item:hover { background: #0a162a; }
    .diagram { margin-top: 1rem; background: #0b1220; border: 1px solid #1f2a44; border-radius: 12px; padding: 1rem; }
    .diagram svg { width: 100%; height: auto; max-width: 720px; display: block; margin: 0 auto; }
  </style>
</head>
<body>
  <div class="card">
    <h1>Capstone Nginx</h1>
    <p>Deployed via Jenkins → Terraform → EKS</p>
    <div class="badge">v2 - Calculator</div>

    <div class="wrap">
    <div class="calc" aria-label="Simple Calculator">
      <input id="disp" class="display" type="text" inputmode="decimal" placeholder="0" aria-label="calculator display" readonly />
      <div class="row" style="margin-bottom: 0.5rem;">
        <button class="btn clear" data-action="clear">C</button>
        <button class="btn" data-action="back">⌫</button>
        <button class="btn" data-value="%">%</button>
        <button class="btn op" data-value="/">÷</button>
      </div>

  <section class="about" aria-label="About this project">
    <h2>About this Project</h2>
    <p>This capstone demonstrates a CI/CD pipeline that builds a Docker image, pushes to ECR, and deploys to an Amazon EKS cluster with Terraform-provisioned infrastructure. The calculator is a simple UI to verify end-to-end delivery.</p>
    <div class="badges">
      <span class="badge-chip">Jenkins</span>
      <span class="badge-chip">Terraform</span>
      <span class="badge-chip">Amazon EKS</span>
      <span class="badge-chip">Docker</span>
      <span class="badge-chip">Amazon ECR</span>
    </div>
    <div class="diagram" aria-label="Architecture Diagram">
      <svg viewBox="0 0 820 200" xmlns="http://www.w3.org/2000/svg" role="img">
        <defs>
          <linearGradient id="g1" x1="0" x2="1" y1="0" y2="1">
            <stop stop-color="#1f2937" offset="0"/>
            <stop stop-color="#0b1220" offset="1"/>
          </linearGradient>
          <style>
            .bx{fill:url(#g1);stroke:#1f2a44;stroke-width:1.2;rx:10;ry:10}
            .tx{fill:#cbd5e1;font:600 13px Arial,sans-serif}
            .sub{fill:#93a3b8;font:400 11px Arial,sans-serif}
            .arr{stroke:#38bdf8;stroke-width:2.2;marker-end:url(#arrow)}
          </style>
          <marker id="arrow" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
            <path d="M0,0 L10,5 L0,10 z" fill="#38bdf8"/>
          </marker>
        </defs>
        <!-- Boxes -->
        <rect class="bx" x="20" y="30" width="160" height="70"/>
        <text class="tx" x="100" y="58" text-anchor="middle">Jenkins</text>
        <text class="sub" x="100" y="78" text-anchor="middle">Build & Push</text>

        <rect class="bx" x="220" y="30" width="180" height="70"/>
        <text class="tx" x="310" y="58" text-anchor="middle">Amazon ECR</text>
        <text class="sub" x="310" y="78" text-anchor="middle">Image Registry</text>

        <rect class="bx" x="440" y="30" width="180" height="70"/>
        <text class="tx" x="530" y="58" text-anchor="middle">Terraform</text>
        <text class="sub" x="530" y="78" text-anchor="middle">Provision EKS & VPC</text>

        <rect class="bx" x="640" y="30" width="160" height="70"/>
        <text class="tx" x="720" y="58" text-anchor="middle">Amazon EKS</text>
        <text class="sub" x="720" y="78" text-anchor="middle">Deploy & Service</text>

        <!-- Arrows -->
        <line class="arr" x1="180" y1="65" x2="220" y2="65"/>
        <line class="arr" x1="400" y1="65" x2="440" y2="65"/>
        <line class="arr" x1="620" y1="65" x2="640" y2="65"/>

        <!-- Bottom note -->
        <text class="sub" x="410" y="150" text-anchor="middle">Flow: Jenkins builds → Push to ECR → Terraform manages infra → App deploys to EKS (exposed via LoadBalancer)</text>
      </svg>
    </div>
  </section>
      <div class="row">
        <button class="btn" data-value="7">7</button>
        <button class="btn" data-value="8">8</button>
        <button class="btn" data-value="9">9</button>
        <button class="btn op" data-value="*">×</button>
      </div>
      <div class="row">
        <button class="btn" data-value="4">4</button>
        <button class="btn" data-value="5">5</button>
        <button class="btn" data-value="6">6</button>
        <button class="btn op" data-value="-">−</button>
      </div>
      <div class="row">
        <button class="btn" data-value="1">1</button>
        <button class="btn" data-value="2">2</button>
        <button class="btn" data-value="3">3</button>
        <button class="btn op" data-value="+">+</button>
      </div>
      <div class="row">
        <button class="btn" data-value="0">0</button>
        <button class="btn" data-value=".">.</button>
        <button class="btn equal" data-action="eval">=</button>
      </div>
      <div class="footer">Supports keyboard: digits, + − × ÷ % .  Enter (=), Backspace (⌫), Esc (C)</div>
    </div>
    <div class="history" aria-label="Calculation History">
      <h3>History</h3>
      <div id="hist"></div>
    </div>
    </div>
  </div>

  <script>
    (function() {
      const disp = document.getElementById('disp');
      let expr = '';
      const history = [];
      const HMAX = 5;
      const histEl = document.getElementById('hist');
      const set = v => { expr = v; disp.value = v || '0'; };
      const renderHist = () => {
        histEl.innerHTML = history.map(([e, r], i) => `<div class="hist-item" data-idx="${i}" title="Click to reuse"><span>${e}</span><strong>= ${r}</strong></div>`).join('');
      };
      set('');

      function safeAppend(val) {
        // prevent multiple operators in a row
        if ('+-*/%'.includes(val)) {
          if (!expr || '+-*/%.'.includes(expr.slice(-1))) return;
        }
        if (val === '.' && (expr.slice(-1) === '.' || /\.\d*$/.test(expr))) {
          // basic dot guard per number segment
        }
        set(expr + val);
      }

      function evaluate() {
        if (!expr) return;
        try {
          // eslint-disable-next-line no-new-func
          const result = Function(`return (${expr})`)();
          const out = String(result);
          // push to history
          history.unshift([expr, out]);
          if (history.length > HMAX) history.pop();
          renderHist();
          set(out);
        } catch(e) {
          set('');
          alert('Invalid expression');
        }
      }

      document.addEventListener('click', e => {
        const b = e.target.closest('button.btn');
        if (!b) return;
        const action = b.getAttribute('data-action');
        const val = b.getAttribute('data-value');
        if (action === 'clear') return set('');
        if (action === 'back') return set(expr.slice(0, -1));
        if (action === 'eval') return evaluate();
        if (val) return safeAppend(val);
      });

      // Click history to reuse result
      histEl.addEventListener('click', e => {
        const item = e.target.closest('.hist-item');
        if (!item) return;
        const idx = +item.getAttribute('data-idx');
        const pair = history[idx];
        if (!pair) return;
        set(pair[1]);
      });

      // Keyboard support
      document.addEventListener('keydown', e => {
        const k = e.key;
        if ((k >= '0' && k <= '9') || k === '.') return safeAppend(k);
        if (['+', '-', '*', '/','%'].includes(k)) return safeAppend(k);
        if (k === 'Enter' || k === '=') { e.preventDefault(); return evaluate(); }
        if (k === 'Backspace') { e.preventDefault(); return set(expr.slice(0, -1)); }
        if (k === 'Escape') { e.preventDefault(); return set(''); }
      });
    })();
  </script>
</body>
</html>
